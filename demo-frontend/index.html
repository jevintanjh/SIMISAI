<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIMISAI - Medical Device Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            max-width: 800px;
            width: 100%;
            margin: 20px;
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
            font-size: 1.2em;
        }
        
        .chat-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            min-height: 400px;
            max-height: 500px;
            overflow-y: auto;
        }
        
        .message {
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 10px;
            max-width: 80%;
        }
        
        .user-message {
            background: #007bff;
            color: white;
            margin-left: auto;
            text-align: right;
        }
        
        .ai-message {
            background: #e9ecef;
            color: #333;
            margin-right: auto;
        }
        
        .provider-info {
            font-size: 0.8em;
            color: #666;
            margin-top: 5px;
            font-style: italic;
        }
        
        .input-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .message-input {
            flex: 1;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 16px;
            outline: none;
            transition: border-color 0.3s;
        }
        
        .message-input:focus {
            border-color: #007bff;
        }
        
        .send-button {
            padding: 15px 30px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .send-button:hover {
            background: #0056b3;
        }
        
        .send-button:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }
        
        .status-bar {
            background: #e9ecef;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .status-ready {
            background: #28a745;
        }
        
        .status-loading {
            background: #ffc107;
            animation: pulse 1s infinite;
        }
        
        .status-error {
            background: #dc3545;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .feature {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        
        .feature-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .feature h3 {
            color: #333;
            margin-bottom: 10px;
        }
        
        .feature p {
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üè• SIMISAI</h1>
        <p class="subtitle">AI-Powered Medical Device Assistant</p>
        
        <div class="status-bar">
            <span class="status-indicator status-loading"></span>
            <span id="status-text">Connecting to AI service...</span>
        </div>
        
        <div class="chat-container" id="chat-container">
            <div class="message ai-message">
                <div>Welcome to SIMISAI! I'm your AI-powered medical device assistant. How can I help you today?</div>
                <div class="provider-info">Provider: Initializing...</div>
            </div>
        </div>
        
        <div class="input-container">
            <input type="text" class="message-input" id="message-input" placeholder="Ask me about medical devices, procedures, or health questions..." disabled>
            <button class="send-button" id="send-button" disabled>Send</button>
        </div>
        
        <div class="features">
            <div class="feature">
                <div class="feature-icon">ü§ñ</div>
                <h3>AI-Powered</h3>
                <p>Advanced language model for medical assistance</p>
            </div>
            <div class="feature">
                <div class="feature-icon">üì±</div>
                <h3>Real-time Chat</h3>
                <p>Instant responses to your medical questions</p>
            </div>
            <div class="feature">
                <div class="feature-icon">üî¨</div>
                <h3>Computer Vision</h3>
                <p>Image analysis for medical device detection</p>
            </div>
            <div class="feature">
                <div class="feature-icon">‚òÅÔ∏è</div>
                <h3>Cloud Infrastructure</h3>
                <p>Production-grade AWS deployment</p>
            </div>
        </div>
    </div>

    <script>
        // Configuration
        const CONFIG = {
            hybridLambdaUrl: 'https://abc123.execute-api.us-east-1.amazonaws.com/prod/chat',
            statusServiceUrl: 'https://abc123.execute-api.us-east-1.amazonaws.com/prod/status'
        };
        
        // State
        let isConnected = false;
        let currentProvider = 'unknown';
        
        // DOM elements
        const chatContainer = document.getElementById('chat-container');
        const messageInput = document.getElementById('message-input');
        const sendButton = document.getElementById('send-button');
        const statusText = document.getElementById('status-text');
        const statusIndicator = document.querySelector('.status-indicator');
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            checkStatus();
            setupEventListeners();
        });
        
        function setupEventListeners() {
            sendButton.addEventListener('click', sendMessage);
            messageInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !sendButton.disabled) {
                    sendMessage();
                }
            });
        }
        
        async function checkStatus() {
            try {
                // For demo purposes, simulate status check
                setTimeout(() => {
                    statusIndicator.className = 'status-indicator status-ready';
                    statusText.textContent = 'AI service ready - Using OpenAI GPT-4 (Demo Mode)';
                    currentProvider = 'OpenAI GPT-4';
                    isConnected = true;
                    messageInput.disabled = false;
                    sendButton.disabled = false;
                }, 2000);
                
            } catch (error) {
                console.error('Status check failed:', error);
                statusIndicator.className = 'status-indicator status-error';
                statusText.textContent = 'AI service unavailable';
            }
        }
        
        async function sendMessage() {
            const message = messageInput.value.trim();
            if (!message || !isConnected) return;
            
            // Add user message to chat
            addMessage(message, 'user');
            
            // Clear input and disable
            messageInput.value = '';
            sendButton.disabled = true;
            
            // Show typing indicator
            const typingId = addMessage('Thinking...', 'ai', true);
            
            try {
                // Simulate API call for demo
                setTimeout(() => {
                    removeMessage(typingId);
                    const response = generateDemoResponse(message);
                    addMessage(response, 'ai');
                    sendButton.disabled = false;
                }, 1500);
                
            } catch (error) {
                console.error('Send message failed:', error);
                removeMessage(typingId);
                addMessage('Sorry, I encountered an error. Please try again.', 'ai');
                sendButton.disabled = false;
            }
        }
        
        function addMessage(text, sender, isTyping = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            if (isTyping) messageDiv.id = 'typing-message';
            
            const textDiv = document.createElement('div');
            textDiv.textContent = text;
            messageDiv.appendChild(textDiv);
            
            if (sender === 'ai' && !isTyping) {
                const providerDiv = document.createElement('div');
                providerDiv.className = 'provider-info';
                providerDiv.textContent = `Provider: ${currentProvider}`;
                messageDiv.appendChild(providerDiv);
            }
            
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
            
            return messageDiv.id;
        }
        
        function removeMessage(messageId) {
            const message = document.getElementById(messageId);
            if (message) {
                message.remove();
            }
        }
        
        function generateDemoResponse(userMessage) {
            const responses = [
                "That's a great question about medical devices! Based on current medical standards, I can help you understand the proper procedures.",
                "I can assist you with information about medical device safety protocols and best practices.",
                "For medical device questions, it's important to consult with healthcare professionals. I can provide general information to help guide your understanding.",
                "Medical device procedures require careful attention to detail. Let me help you understand the key considerations.",
                "I'm here to help with medical device information. What specific aspect would you like to know more about?"
            ];
            
            return responses[Math.floor(Math.random() * responses.length)];
        }
    </script>
</body>
</html>
